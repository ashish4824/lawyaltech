<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Tech Training Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

        body { 
            font-family: 'Poppins', sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #2c3e50;
            min-height: 100vh;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            transform: translateY(0);
            transition: all 0.3s ease;
        }

        .game-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .section {
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s forwards;
        }

        button {
            padding: 12px 24px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(102,126,234,0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102,126,234,0.4);
            background: linear-gradient(45deg, #764ba2, #667eea);
        }

        .hint {
            color: #667eea;
            text-decoration: none;
            cursor: pointer;
            padding: 3px 8px;
            border-radius: 4px;
            background: #edf2f7;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .hint:hover {
            background: #667eea;
            color: white;
        }

        .cert-badge {
            color: #27ae60;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #27ae60;
            border-radius: 8px;
            display: none;
            animation: slideFadeIn 0.6s ease;
            background: #f0fff4;
        }

        textarea {
            width: 100%;
            height: 100px;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            resize: vertical;
            transition: border-color 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.2);
        }

        .question-group {
            margin-bottom: 20px;
        }
        
        .question-group p {
            margin-bottom: 10px;
        }
        
        .radio-group {
            margin-left: 20px;
        }
        
        label {
            display: inline-block;
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        label:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideFadeIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .hidden-hint {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .hide {
            display: none !important;
        }

        /* Popup Styles */
        .popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            color: white; 
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999; 
            padding: 10px 0;
        }

        .popup-content {
            background-color: green;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            max-width: 500px;
            width: 100%;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
        }

        .popup-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 25px;
            cursor: pointer;
            color: black;
            background: transparent;
            border: none;
            font-weight: bold;
        }

        

    </style>
</head>
<body>
    <div class="game-container">
        <h1>Welcome to Legal Tech Trainer!</h1>

        <!-- Introduction -->
        <div class="section">
            <h2>What is Legal Tech?</h2>
            <p>Legal technology, often referred to as "legal tech," refers to the use of technology and software to provide legal services. It aims to streamline processes, improve efficiency, and reduce costs in the legal industry.</p>
        </div>

        <div class="section">
            <h2>Concept of CLM Tools and Document Automation</h2>
            <p>Contract Lifecycle Management (CLM) tools help manage contracts from initiation through execution, amendment, and renewal. Document automation within CLM tools allows users to automatically generate documents using predefined templates and rules.</p>
        </div>

        <div class="section">
            <h2>Familiarize with Jargons:</h2>
            <ul>
                <li><strong>Placeholders:</strong> Placeholders in CLM tools are pre-defined fields or variables in contract templates that act as temporary markers for information to be filled in later, such as party names, dates, or amounts. They enable dynamic content insertion, ensuring consistency and efficiency in contract creation while allowing customization for specific agreements.</li>
                <li><strong>Small Conditions:</strong> Small conditions are simple, single-variable checks that trigger minor changes in the contract, such as showing or hiding specific fields, phrases, or short clauses.
                    Example in an NDA Contract :
                    "If the [NDA Type] is 'Unilateral,' include only one party's obligations. If 'Bilateral,' include mutual obligations."
                    Here, the condition depends on whether the NDA is unilateral or bilateral, affecting only a small portion of the document.</pre>
                </li>
                <li><strong>Big Conditions:</strong> Definition : Big conditions involve complex, multi-variable checks that can significantly alter the structure or content of the contract, such as adding entire sections, changing key terms, or even generating different versions of the agreement.
                    Example in an NDA Contract :
                    "If the [Industry Type] is 'Healthcare' and the [Data Sensitivity Level] is 'High,' include HIPAA compliance clauses and extend the confidentiality period to 10 years."
                    This condition involves multiple factors (industry type and data sensitivity) and results in substantial changes to the contract, including additional legal requirements and extended terms.
</pre>
                </li>
            </ul>
        </div>

        <!-- Quiz Level 1 -->
        <div id="quizLevel1" class="section">
            <h2>Quiz Time - Level 1!</h2>
            <form id="quizForm 1"> <!--change id from quizForm1 to quizForm 1-->
                <div class="question-group">
                    <p>Question 1: What is the best way to automate a placeholder like "Company Name"?</p>
                    <div class="radio-group">
                        <input type="radio" id="q1a" name="q1" value="A">
                        <label for="q1a">A) Put curly braces around the placeholders</label><br>
                        <input type="radio" id="q1b" name="q1" value="B">
                        <label for="q1b">B) Use square braces around the placeholder like [COMPANY NAME]</label><br>
                        <input type="radio" id="q1c" name="q1" value="C">
                        <label for="q1c">C) Delete the placeholder and leave it blank</label><br>
                    </div>
                </div>
                <span class="hint" onclick="showHint('q1')">Hint</span>
                <div id="q1_hint" class="hidden-hint">Think about the standard format used in document automation.</div><br><br>

                <p>Question 2: How would you handle a clause that varies by jurisdiction?</p>
                <input type="radio" id="q2a" name="q2" value="A">
                <label for="q2a">A) Write 10 versions manually</label><br>
                <input type="radio" id="q2b" name="q2" value="B">
                <label for="q2b">B) Use conditional logic (e.g., IF Jurisdiction = X, THEN include Clause Y)</label><br>
                <input type="radio" id="q2c" name="q2" value="C">
                <label for="q2c">C) Ignore jurisdiction differences</label><br>
                <span class="hint" onclick="showHint('q2')">Hint</span>
                <div id="q2_hint" class="hidden-hint">Consider how modern software handles different conditions.</div><br><br>

                <p>Question 3: Which tool is least likely to help with document automation?</p>
                <input type="radio" id="q3a" name="q3" value="A">
                <label for="q3a">A) A practice management tool</label><br>
                <input type="radio" id="q3b" name="q3" value="B">
                <label for="q3b">B) Python scripting with docx libraries</label><br>
                <input type="radio" id="q3c" name="q3" value="C">
                <label for="q3c">C) A CLM tool</label><br>
                <span class="hint" onclick="showHint('q3')">Hint</span>
                <div id="q3_hint" class="hidden-hint">Think about traditional vs. modern tools.</div><br><br>

                <p>Question 4: Why use automation in legal documents?</p>
                <input type="radio" id="q4a" name="q4" value="A">
                <label for="q4a">A) To reduce human error</label><br>
                <input type="radio" id="q4b" name="q4" value="B">
                <label for="q4b">B) To save time on repetitive tasks</label><br>
                <input type="radio" id="q4c" name="q4" value="C">
                <label for="q4c">C) Both A and B</label><br>
                <span class="hint" onclick="showHint('q4')">Hint</span>
                <div id="q4_hint" class="hidden-hint">Automation offers multiple benefits.</div><br><br>

                <p>Question 5: How can you ensure tasks are assigned to the right team members?</p>
                <input type="radio" id="q5a" name="q5" value="A">
                <label for="q5a">A) Manually assign tasks based on availability</label><br>
                <input type="radio" id="q5b" name="q5" value="B">
                <label for="q5b">B) Use role-based assignment rules to automatically assign tasks</label><br>
                <input type="radio" id="q5c" name="q5" value="C">
                <label for="q5c">C) Ask team members to pick up tasks themselves</label><br>
                <span class="hint" onclick="showHint('q5')">Hint</span>
                <div id="q5_hint" class="hidden-hint">Think about automating task distribution.</div><br><br>

                <button type="button" onclick="submitQuiz('1')">Submit</button>
            </form>

            <div id="feedback 1"></div> <!--change id from feedback1 to feedback 1-->
            <div id="certification 1" class="cert-badge"></div> <!--change id from certification1 to certification 1-->
        </div>

        <!-- NDA Contract Automation -->
        <div id="ndaSection" class="section hide">
            <h2>Automating an NDA Contract</h2>
            <p>Here is a sample NDA contract. Please answer the following questions accordingly:</p>
            <p>NDA Contract:</p>
            <textarea readonly rows="10">
                NON-DISCLOSURE AGREEMENT

                This Agreement ("Agreement") is made effective as of [Agreement Date], by and between [Company Name], with its principal place of business at [Company Address] ("Disclosing Party"), and [Receiving Party Name], with its principal place of business at [Receiving Party Address] ("Receiving Party").

                1. PurposeThe Disclosing Party possesses certain confidential and proprietary information ("Confidential Information") that it may disclose to the Receiving Party for the purpose of [Purpose of Disclosure].

                2. Confidential Informationa. For the purposes of this Agreement, "Confidential Information" shall include all non-public information disclosed by the Disclosing Party to the Receiving Party, whether in written, electronic, or oral form, and whether marked as "Confidential" or not, except as provided in Section 2(b).

                b. Exclusions: Confidential Information shall not include information that:

                Is or becomes publicly available without breach of this Agreement;

                Is lawfully received from a third party without restriction;

                Is independently developed by the Receiving Party without use of or reference to the Confidential Information;

                Is required to be disclosed by law or court order.

                3. Obligations of Receiving Partya. The Receiving Party shall:

                Maintain the confidentiality of the Confidential Information;

                Not disclose the Confidential Information to any third party without prior written consent of the Disclosing Party;

                Use the Confidential Information solely for the Purpose stated in this Agreement.

                4. Limitation on Marking Confidential Information{{MarkAsConfidential_No}}.[[The Disclosing Party may not mark all confidential information as "Confidential"]]

                5. Term and TerminationThis Agreement shall remain in effect for [Duration] from the Effective Date, unless earlier terminated by mutual written agreement. The Receiving Party‚Äôs confidentiality obligations shall survive the termination of this Agreement for a period of [Survival Period].

                6. Governing Law and Dispute Resolution{{includegoverninglaw_yes}}.[[This Agreement shall be governed by and construed in accordance with the laws of [Jurisdiction]. Any disputes arising under this Agreement shall be resolved in the courts of [Jurisdiction].]]

                7. Miscellaneousa. This Agreement constitutes the entire understanding between the Parties concerning the subject matter herein and supersedes all prior agreements, whether written or oral.

                b. No modification or waiver of this Agreement shall be effective unless in writing and signed by both Parties.

                c. If any provision of this Agreement is found to be invalid or unenforceable, the remainder of the Agreement shall remain in full force and effect.

                IN WITNESS WHEREOF, the Parties have executed this Agreement as of the Effective Date.

                Disclosing Party:[Company Name]By: _______Name: ________Title: ________Date: _______

                Receiving Party:[Receiving Party Name]By: _______Name: ________Title: ________Date: _______
            </textarea>
            <p>Automate the placeholders:</p>
            <textarea id="placeholdersInput" placeholder="Enter your answers here..."></textarea><br>
            <span class="hint" onclick="showHint('placeholders')">Hint</span>
            <div id="placeholders_hint" class="hidden-hint">[Company Name], [Agreement Date]
.</div><br><br>
            <button type="button" onclick="validatePlaceholders()">Submit</button>

            <div id="placeholderFeedback"></div>
            <div id="smallConditionFeedback"></div>
            <div id="bigConditionFeedback"></div>
            <div id="certification2" class="cert-badge"></div>

            <p>Now, automate the following small condition:</p>
            <p>How would you automate a small condition in the above NDA for excluding a Confidential part in the Confidentiality clause?</p>
            <textarea id="smallConditionInput" placeholder="Enter your answer here..."></textarea><br>
            <span class="hint" onclick="showHint('smallCondition')">Hint</span>
            <div id="smallCondition_hint" class="hidden-hint">{{MarkAsConfidential_No}}.[[The Disclosing Party may not mark all confidential information as "Confidential"]]
</div><br><br>
            <button type="button" onclick="validateSmallCondition()">Submit</button>

            <p>Finally, automate the following big condition:</p>
            <p>How would you automate a big condition in the above NDA for including a Governing Law clause?</p>
            <textarea id="bigConditionInput" placeholder="Enter your answer here..."></textarea><br>
            <span class="hint" onclick="showHint('bigCondition')">Hint</span>
            <div id="bigCondition_hint" class="hidden-hint">{{includegoverninglaw_yes}}.[[this agreement shall be governed by and construed in accordance with the laws of [jurisdiction]. any disputes arising under this agreement shall be resolved in the courts of [jurisdiction].]]</div><br><br>
            <button type="button" onclick="validateBigCondition()">Submit</button>
        </div>

        <!-- Workflow Section -->
        <div id="workflowSection" class="section hide">
            <h2>Understanding Workflows in CLM</h2>
            <p>In Contract Lifecycle Management (CLM), workflows ensure that contracts progress smoothly from creation through approval, signing, and completion. By automating repetitive tasks and ensuring proper task distribution, workflows reduce manual effort and minimize errors. Understanding how to set up triggers and actions is key to designing effective workflows that enhance productivity in legal processes.</p>
            <p>This introduction should help you as you tackle the questions related to workflows. Good luck!</p>

            <h2>Quiz Time - Workflows!</h2>
            <form id="workflowQuiz">
                <p>Question 1: What is the most appropriate trigger to use if you want to initiate a workflow when a contract is ready to be sent to external parties for signing?</p>
                <input type="radio" id="wf1a" name="wf1" value="A">
                <label for="wf1a">A) Document Created</label><br>
                <input type="radio" id="wf1b" name="wf1" value="B">
                <label for="wf1b">B) Document Ready to Send</label><br>
                <input type="radio" id="wf1c" name="wf1" value="C">
                <label for="wf1c">C) Questionnaire Submitted</label><br>
                <input type="radio" id="wf1d" name="wf1" value="D">
                <label for="wf1d">D) Document Out for Signature</label><br>
                <span class="hint" onclick="showHint('wf1')">Hint</span>
                <div id="wf1_hint" class="hidden-hint">Consider the document state that aligns with preparing the document for external distribution.</div><br><br>

                <p>Question 2: Which action would you select in a workflow if you want to notify all relevant stakeholders when a document reaches the "Partially Signed" state?</p>
                <input type="radio" id="wf2a" name="wf2" value="A">
                <label for="wf2a">A) Send an email notification</label><br>
                <input type="radio" id="wf2b" name="wf2" value="B">
                <label for="wf2b">B) Lock the document for editing</label><br>
                <input type="radio" id="wf2c" name="wf2" value="C">
                <label for="wf2c">C) Automatically send the document out for signature</label><br>
                <input type="radio" id="wf2d" name="wf2" value="D">
                <label for="wf2d">D) Change the document state to "Completed"</label><br>
                <span class="hint" onclick="showHint('wf2')">Hint</span>
                <div id="wf2_hint" class="hidden-hint">Think about the purpose of notifying stakeholders during specific stages of the document lifecycle.</div><br><br>

                <p>Question 3: If you want to automate the assignment of a task to a reviewer when a questionnaire has been submitted, which combination of trigger and action would you choose?</p>
                <input type="radio" id="wf3a" name="wf3" value="A">
                <label for="wf3a">A) Trigger: Document Created; Action: Assign Task</label><br>
                <input type="radio" id="wf3b" name="wf3" value="B">
                <label for="wf3b">B) Trigger: Questionnaire Submitted; Action: Notify Reviewer</label><br>
                <input type="radio" id="wf3c" name="wf3" value="C">
                <label for="wf3c">C) Trigger: Approval Status; Action: Send Document for Signature</label><br>
                <input type="radio" id="wf3d" name="wf3" value="D">
                <label for="wf3d">D) Trigger: Document Locked; Action: Unlock Document</label><br>
                <span class="hint" onclick="showHint('wf3')">Hint</span>
                <div id="wf3_hint" class="hidden-hint">Match the trigger to the event of submitting a questionnaire and the action that ensures the reviewer is involved next.</div><br><br>

                <button type="button" onclick="submitWorkflowQuiz()">Submit</button>
            </form>

            <div id="workflowFeedback"></div>
            <div id="certification3" class="cert-badge"></div>
        </div>
        <!--certification badge 1-->
        <div id="popup1" class="popup" style="display: none;">
            <div class="popup-content">
                <span class="popup-close" onclick="closePopup('popup1')">√ó</span>
                <p id="popup-message1">üë®‚Äçüíº Junior Legal Engineer Unlocked!</p>
            </div>
        </div>
        <!--certification badge 2-->
        <div id="popup2" class="popup" style="display: none;">
            <div class="popup-content">
                <span class="popup-close" onclick="closePopup('popup1')">√ó</span>
                <p id="popup-message2">‚öîÔ∏è CLM Warrior Unlocked!</p>
            </div>
        </div>
        <!--certification badge 3-->
        <div id="popup3" class="popup" style="display: none;">
            <div class="popup-content">
                <span class="popup-close" onclick="closePopup('popup1')">√ó</span>
                <p id="popup-message3">üìú Contract Alchemist Unlocked!</p>
            </div>
        </div>
    </div>

    <script>
        // Add animation to sections as they become visible
        function animateSections() {
            const sections = document.querySelectorAll('.section');
            sections.forEach((section, index) => {
                section.style.animationDelay = `${index * 0.2}s`; // added backticks
            });
        }

        // Animate feedback messages
        function animateFeedback(element) {
            element.style.animation = 'slideFadeIn 0.6s ease';
            element.style.display = 'block';
        }

        // Initialize animations
        document.addEventListener('DOMContentLoaded', () => {
            animateSections();

            // Add pulse animation to buttons on hover
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('mouseover', () => {
                    button.style.transform = 'scale(1.05)';
                });
                button.addEventListener('mouseout', () => {
                    button.style.transform = 'scale(1)';
                });
            });
        });

        const correctAnswers = {
            q1: 'B',
            q2: 'B',
            q3: 'A', 
            q4: 'C',
            q5: 'B'
        };

        const workflowCorrectAnswers = {
            wf1: 'B',
            wf2: 'A',
            wf3: 'B'
        };

        function showHint(question) {
            const hintElement = document.getElementById(`${question}_hint`); // added backticks
            hintElement.classList.toggle('hidden-hint');
        }

        function submitQuiz(level) {
            let score = 0;
            let feedback = '';
            let formId = `quizForm ${level}`; // added backticks
            let feedbackId = `feedback ${level}`; // added backticks
            let certificationId = `certification ${level}`; // added backticks
            let correctAns = correctAnswers;

            // Check answers
            for (let question in correctAns) {
                const selectedOption = document.querySelector(`input[name=${question}]:checked`); // added backticks
                if (selectedOption && selectedOption.value === correctAns[question]) {
                    score += 1;
                } else {
                    feedback += `Question ${question.slice(-1)}: ‚ùå Incorrect.<br>`; // added backticks
                }
            }

            // Provide feedback for correct answers
            if (score >= 4) { // Adjusted threshold since there are now 5 questions
                feedback = "<p style='color:green'>‚úÖ Success! Certification unlocked.</p><p>Congratulations on completing the first section!</p>";
                const certElement = document.getElementById(certificationId);
                certElement.style.display = 'block';
                certElement.innerHTML = "üë®‚Äçüíº Junior Legal Engineer ‚Äì Beginner level";
                document.getElementById('quizLevel1').style.display = 'none';
                const ndaSection = document.getElementById('ndaSection');
                ndaSection.style.display = 'block';
                ndaSection.classList.remove('hide');
                certElement.classList.remove('hide');
                // shows first certification
                showPopup("popup1");
            } else {
                feedback += `<p style='color:red'>‚ö†Ô∏è Accuracy: ${(score / Object.keys(correctAns).length * 100).toFixed(0)}%. Try again!</p>`; // added backticks
            }

            // Display feedback
            document.getElementById(feedbackId).innerHTML = feedback;
            document.getElementById(formId).reset();
        }

        function validatePlaceholders() {
            const userInput = document.getElementById('placeholdersInput').value.toLowerCase().replace(/[\s]/g, '');
            const expected = "[companyname],[agreementdate]";
            if (userInput.includes(expected)) {
                document.getElementById('placeholderFeedback').innerHTML = "<p style='color:green'>‚úÖ Success! Certification unlocked.</p><p style='color:green'>‚úÖ Placeholders correctly automated.</p>";
                document.getElementById('smallConditionInput').disabled = false;
            } else {
                document.getElementById('placeholderFeedback').innerHTML = "<p style='color:red'>‚ùå Incorrect. Try again!</p>";
            }
        }

        function validateSmallCondition() {
            const userInput = document.getElementById('smallConditionInput').value.trim().toLowerCase();
            const expected = "{{markasconfidential_no}}.[[the disclosing party may not mark all confidential information as \"confidential\"]]";
            if (userInput === expected) {
                document.getElementById('smallConditionFeedback').innerHTML = "<p style='color:green'>‚úÖ Success! Certification unlocked.</p><p style='color:green'>‚úÖ Small condition correctly automated.</p>";
                document.getElementById('bigConditionInput').disabled = false;
            } else {
                document.getElementById('smallConditionFeedback').innerHTML = "<p style='color:red'>‚ùå Incorrect. Try again!</p>";
            }
        }

        function validateBigCondition() {
            const userInput = document.getElementById('bigConditionInput').value.trim().toLowerCase();
            const expected = "{{includegoverninglaw_yes}}.[[this agreement shall be governed by and construed in accordance with the laws of [jurisdiction]. any disputes arising under this agreement shall be resolved in the courts of [jurisdiction].]]";
            if (userInput === expected) {
                document.getElementById('bigConditionFeedback').innerHTML = "<p style='color:green'>‚úÖ Big condition correctly automated.</p>";
                document.getElementById('certification2').innerHTML = "‚öîÔ∏è CLM Warrior ‚Äì Proficient in workflow automation";
                document.getElementById('ndaSection').style.display = 'none';
                const workflowSection = document.getElementById('workflowSection');
                workflowSection.style.display = '';
                workflowSection.style.visibility = 'visible';
                workflowSection.classList.remove('hide');
                // shows second certification
                showPopup("popup2");
            } else {
                document.getElementById('bigConditionFeedback').innerHTML = "<p style='color:red'>‚ùå Incorrect. Try again!</p>";
            }
        }

        function submitWorkflowQuiz() {
            let score = 0;
            let feedback = '';
            let formId = 'workflowQuiz';
            let feedbackId = 'workflowFeedback';
            let certificationId = 'certification3';
            let correctAns = workflowCorrectAnswers;

            // Check answers
            for (let question in correctAns) {
                const selectedOption = document.querySelector(`input[name=${question}]:checked`); // added backticks
                if (selectedOption && selectedOption.value === correctAns[question]) {
                    score += 1;
                } else {
                    feedback += `Question ${question.slice(-2)}: ‚ùå Incorrect.<br>`; // added backticks
                }
            }

            // Provide feedback for correct answers
            if (score === Object.keys(correctAns).length) {
                feedback = "<p style='color:green'>‚úÖ Success! Certification unlocked.</p>";
                document.getElementById(certificationId).innerHTML = "üìú Contract Alchemist ‚Äì Mid-level expertise in automation";
                // shows third certification
                showPopup("popup3");
                setTimeout(() => { alert("Congratulations! You've completed this part of the challenge!"); }, 1000);
            } else {
                feedback += `<p style='color:red'>‚ö†Ô∏è Accuracy: ${(score / Object.keys(correctAns).length * 100).toFixed(0)}%. Try again!</p>`; // added backticks
            }

            // Display feedback
            document.getElementById(feedbackId).innerHTML = feedback;
            document.getElementById(formId).reset();
        }

        // Show the popup with a message
        function showPopup(popupId) {
            const popup = document.getElementById(popupId);
            popup.style.display = 'flex'; 
        }

        // Close the popup by its ID
        function closePopup(popupId) {
            const popup = document.getElementById(popupId);
            popup.style.display = 'none'; 
        }
    </script>
</body>
</html>